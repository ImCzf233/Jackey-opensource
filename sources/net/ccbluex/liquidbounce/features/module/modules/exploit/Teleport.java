package net.ccbluex.liquidbounce.features.module.modules.exploit;

import java.awt.Color;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import net.ccbluex.liquidbounce.event.EventTarget;
import net.ccbluex.liquidbounce.event.MoveEvent;
import net.ccbluex.liquidbounce.event.PacketEvent;
import net.ccbluex.liquidbounce.event.Render3DEvent;
import net.ccbluex.liquidbounce.event.UpdateEvent;
import net.ccbluex.liquidbounce.features.module.Module;
import net.ccbluex.liquidbounce.features.module.ModuleCategory;
import net.ccbluex.liquidbounce.features.module.ModuleInfo;
import net.ccbluex.liquidbounce.utils.ClientUtils;
import net.ccbluex.liquidbounce.utils.MovementUtils;
import net.ccbluex.liquidbounce.utils.PathUtils;
import net.ccbluex.liquidbounce.utils.block.BlockUtils;
import net.ccbluex.liquidbounce.utils.render.RenderUtils;
import net.ccbluex.liquidbounce.utils.timer.TickTimer;
import net.ccbluex.liquidbounce.value.BoolValue;
import net.ccbluex.liquidbounce.value.ListValue;
import net.minecraft.block.BlockAir;
import net.minecraft.block.BlockFence;
import net.minecraft.block.BlockSnow;
import net.minecraft.block.material.Material;
import net.minecraft.client.renderer.GlStateManager;
import net.minecraft.client.renderer.entity.RenderManager;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C0BPacketEntityAction;
import net.minecraft.util.AxisAlignedBB;
import net.minecraft.util.BlockPos;
import net.minecraft.util.MovingObjectPosition;
import net.minecraft.util.Vec3;
import org.lwjgl.input.Mouse;
import org.lwjgl.opengl.GL11;

@ModuleInfo(name = "Teleport", description = "Allows you to teleport around.", category = ModuleCategory.EXPLOIT)
/* loaded from: Jackey Client b2.jar:net/ccbluex/liquidbounce/features/module/modules/exploit/Teleport.class */
public class Teleport extends Module {
    private boolean hadGround;
    private double fixedY;
    private int delay;
    private BlockPos endPos;
    private MovingObjectPosition objectPosition;
    private final BoolValue ignoreNoCollision = new BoolValue("IgnoreNoCollision", true);
    private final ListValue modeValue = new ListValue("Mode", new String[]{"Blink", "Flag", "Rewinside", "OldRewinside", "Spoof", "Minesucht", "AAC3.5.0"}, "Blink");
    private final ListValue buttonValue = new ListValue("Button", new String[]{"Left", "Right", "Middle"}, "Middle");
    private final BoolValue requireSneak = new BoolValue("RequireSneak", true, () -> {
        return Boolean.valueOf(this.modeValue.get().equalsIgnoreCase("blink") || this.modeValue.get().equalsIgnoreCase("flag"));
    });
    private final TickTimer flyTimer = new TickTimer();
    private final List<Packet<?>> packets = new ArrayList();
    private boolean disableLogger = false;
    private boolean zitter = false;
    private boolean doTeleport = false;
    private boolean freeze = false;
    private final TickTimer freezeTimer = new TickTimer();

    @Override // net.ccbluex.liquidbounce.features.module.Module
    public void onEnable() {
        if (this.modeValue.get().equalsIgnoreCase("AAC3.5.0")) {
            ClientUtils.displayChatMessage("§c>>> §a§lTeleport §fAAC 3.5.0 §c<<<");
            ClientUtils.displayChatMessage("§cHow to teleport: §aPress " + this.buttonValue.get() + " mouse button.");
            ClientUtils.displayChatMessage("§cHow to cancel teleport: §aDisable teleport module.");
        }
    }

    @Override // net.ccbluex.liquidbounce.features.module.Module
    public void onDisable() {
        this.fixedY = 0.0d;
        this.delay = 0;
        f362mc.field_71428_T.field_74278_d = 1.0f;
        this.endPos = null;
        this.hadGround = false;
        this.freeze = false;
        this.disableLogger = false;
        this.flyTimer.reset();
        this.packets.clear();
        super.onDisable();
    }

    @EventTarget
    public void onUpdate(UpdateEvent event) {
        int buttonIndex = Arrays.asList(this.buttonValue.getValues()).indexOf(this.buttonValue.get());
        if (this.modeValue.get().equals("AAC3.5.0")) {
            this.freezeTimer.update();
            if (this.freeze && this.freezeTimer.hasTimePassed(40)) {
                this.freezeTimer.reset();
                this.freeze = false;
                setState(false);
            }
            if (!this.flyTimer.hasTimePassed(60)) {
                this.flyTimer.update();
                if (f362mc.field_71439_g.field_70122_E) {
                    f362mc.field_71439_g.func_70664_aZ();
                } else {
                    MovementUtils.forward(this.zitter ? -0.21d : 0.21d);
                    this.zitter = !this.zitter;
                }
                this.hadGround = false;
                return;
            }
            if (f362mc.field_71439_g.field_70122_E) {
                this.hadGround = true;
            }
            if (!this.hadGround) {
                return;
            }
            if (f362mc.field_71439_g.field_70122_E) {
                f362mc.field_71439_g.func_70634_a(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u + 0.2d, f362mc.field_71439_g.field_70161_v);
            }
            f362mc.field_71439_g.field_71075_bZ.field_75100_b = false;
            f362mc.field_71439_g.field_70181_x = 0.0d;
            f362mc.field_71439_g.field_70159_w = 0.0d;
            f362mc.field_71439_g.field_70179_y = 0.0d;
            if (f362mc.field_71474_y.field_74314_A.func_151470_d()) {
                f362mc.field_71439_g.field_70181_x += 2.0d;
            }
            if (f362mc.field_71474_y.field_74311_E.func_151470_d()) {
                f362mc.field_71439_g.field_70181_x -= 2.0d;
            }
            MovementUtils.strafe(2.0f);
            if (Mouse.isButtonDown(buttonIndex) && !this.doTeleport) {
                f362mc.field_71439_g.func_70634_a(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 11.0d, f362mc.field_71439_g.field_70161_v);
                this.disableLogger = true;
                this.packets.forEach(packet -> {
                    f362mc.func_147114_u().func_147297_a(packet);
                });
                this.freezeTimer.reset();
                this.freeze = true;
            }
            this.doTeleport = Mouse.isButtonDown(buttonIndex);
            return;
        }
        if (f362mc.field_71462_r == null && Mouse.isButtonDown(buttonIndex) && this.delay <= 0) {
            this.endPos = this.objectPosition.func_178782_a();
            if (BlockUtils.getBlock(this.endPos).func_149688_o() == Material.field_151579_a) {
                this.endPos = null;
                return;
            } else {
                ClientUtils.displayChatMessage("§7[§8§lTeleport§7] §3Position was set to §8" + this.endPos.func_177958_n() + "§3, §8" + ((BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_180640_a(f362mc.field_71441_e, this.objectPosition.func_178782_a(), BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_176223_P()) == null ? this.endPos.func_177956_o() + BlockUtils.getBlock(this.endPos).func_149669_A() : BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_180640_a(f362mc.field_71441_e, this.objectPosition.func_178782_a(), BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_176223_P()).field_72337_e) + this.fixedY) + "§3, §8" + this.endPos.func_177952_p());
                this.delay = 6;
            }
        }
        if (this.delay > 0) {
            this.delay--;
        }
        if (this.endPos != null) {
            double endX = this.endPos.func_177958_n() + 0.5d;
            double endY = (BlockUtils.getBlock((this.objectPosition == null || this.objectPosition.func_178782_a() == null) ? this.endPos : this.objectPosition.func_178782_a()).func_180640_a(f362mc.field_71441_e, this.objectPosition.func_178782_a(), BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_176223_P()) == null ? this.endPos.func_177956_o() + BlockUtils.getBlock(this.endPos).func_149669_A() : BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_180640_a(f362mc.field_71441_e, this.objectPosition.func_178782_a(), BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_176223_P()).field_72337_e) + this.fixedY;
            double endZ = this.endPos.func_177952_p() + 0.5d;
            String lowerCase = this.modeValue.get().toLowerCase();
            boolean z = true;
            switch (lowerCase.hashCode()) {
                case -436679847:
                    if (lowerCase.equals("oldrewinside")) {
                        z = true;
                        break;
                    }
                    break;
                case 3145580:
                    if (lowerCase.equals("flag")) {
                        z = true;
                        break;
                    }
                    break;
                case 93826908:
                    if (lowerCase.equals("blink")) {
                        z = false;
                        break;
                    }
                    break;
                case 709940890:
                    if (lowerCase.equals("minesucht")) {
                        z = true;
                        break;
                    }
                    break;
                case 1388740000:
                    if (lowerCase.equals("rewinside")) {
                        z = true;
                        break;
                    }
                    break;
            }
            switch (z) {
                case false:
                    if (!this.requireSneak.get().booleanValue() || f362mc.field_71439_g.func_70093_af()) {
                        f362mc.func_147114_u().func_147297_a(new C0BPacketEntityAction(f362mc.field_71439_g, C0BPacketEntityAction.Action.STOP_SNEAKING));
                        PathUtils.findBlinkPath(endX, endY, endZ).forEach(vector3d -> {
                            f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(vector3d.x, vector3d.y, vector3d.z, true));
                            f362mc.field_71439_g.func_70107_b(endX, endY, endZ);
                        });
                        f362mc.func_147114_u().func_147297_a(new C0BPacketEntityAction(f362mc.field_71439_g, C0BPacketEntityAction.Action.START_SNEAKING));
                        ClientUtils.displayChatMessage("§7[§8§lTeleport§7] §3You were teleported to §8" + endX + "§3, §8" + endY + "§3, §8" + endZ);
                        return;
                    }
                    return;
                case true:
                    if (!this.requireSneak.get().booleanValue() || f362mc.field_71439_g.func_70093_af()) {
                        f362mc.func_147114_u().func_147297_a(new C0BPacketEntityAction(f362mc.field_71439_g, C0BPacketEntityAction.Action.STOP_SNEAKING));
                        f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                        f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(endX, endY, endZ, true));
                        f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                        f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u + 5.0d, f362mc.field_71439_g.field_70161_v, true));
                        f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(endX, endY, endZ, true));
                        f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t + 0.5d, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v + 0.5d, true));
                        MovementUtils.forward(0.04d);
                        f362mc.func_147114_u().func_147297_a(new C0BPacketEntityAction(f362mc.field_71439_g, C0BPacketEntityAction.Action.START_SNEAKING));
                        ClientUtils.displayChatMessage("§7[§8§lTeleport§7] §3You were teleported to §8" + endX + "§3, §8" + endY + "§3, §8" + endZ);
                        return;
                    }
                    return;
                case true:
                    f362mc.field_71439_g.field_70181_x = 0.1d;
                    f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(endX, endY, endZ, true));
                    f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u + 0.6d, f362mc.field_71439_g.field_70161_v, true));
                    if (((int) f362mc.field_71439_g.field_70165_t) == ((int) endX) && ((int) f362mc.field_71439_g.field_70163_u) == ((int) endY) && ((int) f362mc.field_71439_g.field_70161_v) == ((int) endZ)) {
                        ClientUtils.displayChatMessage("§7[§8§lTeleport§7] §3You were teleported to §8" + endX + "§3, §8" + endY + "§3, §8" + endZ);
                        this.endPos = null;
                        return;
                    }
                    ClientUtils.displayChatMessage("§7[§8§lTeleport§7] §3Teleport try...");
                    return;
                case true:
                    f362mc.field_71439_g.field_70181_x = 0.1d;
                    f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                    f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(endX, endY, endZ, true));
                    f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                    f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                    f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(endX, endY, endZ, true));
                    f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                    if (((int) f362mc.field_71439_g.field_70165_t) == ((int) endX) && ((int) f362mc.field_71439_g.field_70163_u) == ((int) endY) && ((int) f362mc.field_71439_g.field_70161_v) == ((int) endZ)) {
                        ClientUtils.displayChatMessage("§7[§8§lTeleport§7] §3You were teleported to §8" + endX + "§3, §8" + endY + "§3, §8" + endZ);
                        this.endPos = null;
                    } else {
                        ClientUtils.displayChatMessage("§7[§8§lTeleport§7] §3Teleport try...");
                    }
                    MovementUtils.forward(0.04d);
                    return;
                case true:
                    if (f362mc.field_71439_g.func_70093_af()) {
                        f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(endX, endY, endZ, true));
                        ClientUtils.displayChatMessage("§7[§8§lTeleport§7] §3You were teleported to §8" + endX + "§3, §8" + endY + "§3, §8" + endZ);
                        return;
                    }
                    return;
                default:
                    return;
            }
        }
    }

    @EventTarget
    public void onRender3D(Render3DEvent event) {
        if (this.modeValue.get().equals("AAC3.5.0")) {
            return;
        }
        Vec3 lookVec = new Vec3(f362mc.field_71439_g.func_70040_Z().field_72450_a * 300.0d, f362mc.field_71439_g.func_70040_Z().field_72448_b * 300.0d, f362mc.field_71439_g.func_70040_Z().field_72449_c * 300.0d);
        Vec3 posVec = new Vec3(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u + 1.62d, f362mc.field_71439_g.field_70161_v);
        this.objectPosition = f362mc.field_71439_g.field_70170_p.func_147447_a(posVec, posVec.func_178787_e(lookVec), false, this.ignoreNoCollision.get().booleanValue(), false);
        if (this.objectPosition == null || this.objectPosition.func_178782_a() == null) {
            return;
        }
        BlockPos belowBlockPos = new BlockPos(this.objectPosition.func_178782_a().func_177958_n(), this.objectPosition.func_178782_a().func_177956_o() - 1, this.objectPosition.func_178782_a().func_177952_p());
        this.fixedY = BlockUtils.getBlock(this.objectPosition.func_178782_a()) instanceof BlockFence ? f362mc.field_71441_e.func_72945_a(f362mc.field_71439_g, f362mc.field_71439_g.func_174813_aQ().func_72317_d((((double) this.objectPosition.func_178782_a().func_177958_n()) + 0.5d) - f362mc.field_71439_g.field_70165_t, (((double) this.objectPosition.func_178782_a().func_177956_o()) + 1.5d) - f362mc.field_71439_g.field_70163_u, (((double) this.objectPosition.func_178782_a().func_177952_p()) + 0.5d) - f362mc.field_71439_g.field_70161_v)).isEmpty() ? 0.5d : 0.0d : BlockUtils.getBlock(belowBlockPos) instanceof BlockFence ? (!f362mc.field_71441_e.func_72945_a(f362mc.field_71439_g, f362mc.field_71439_g.func_174813_aQ().func_72317_d((((double) this.objectPosition.func_178782_a().func_177958_n()) + 0.5d) - f362mc.field_71439_g.field_70165_t, (((double) this.objectPosition.func_178782_a().func_177956_o()) + 0.5d) - f362mc.field_71439_g.field_70163_u, (((double) this.objectPosition.func_178782_a().func_177952_p()) + 0.5d) - f362mc.field_71439_g.field_70161_v)).isEmpty() || BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_180640_a(f362mc.field_71441_e, this.objectPosition.func_178782_a(), BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_176223_P()) == null) ? 0.0d : 0.5d - BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_149669_A() : BlockUtils.getBlock(this.objectPosition.func_178782_a()) instanceof BlockSnow ? BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_149669_A() - 0.125d : 0.0d;
        int x = this.objectPosition.func_178782_a().func_177958_n();
        double y = ((BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_180640_a(f362mc.field_71441_e, this.objectPosition.func_178782_a(), BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_176223_P()) == null ? this.objectPosition.func_178782_a().func_177956_o() + BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_149669_A() : BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_180640_a(f362mc.field_71441_e, this.objectPosition.func_178782_a(), BlockUtils.getBlock(this.objectPosition.func_178782_a()).func_176223_P()).field_72337_e) - 1.0d) + this.fixedY;
        int z = this.objectPosition.func_178782_a().func_177952_p();
        if (!(BlockUtils.getBlock(this.objectPosition.func_178782_a()) instanceof BlockAir)) {
            RenderManager renderManager = f362mc.func_175598_ae();
            GL11.glBlendFunc(770, 771);
            GL11.glEnable(3042);
            GL11.glLineWidth(2.0f);
            GL11.glDisable(3553);
            GL11.glDisable(2929);
            GL11.glDepthMask(false);
            RenderUtils.glColor((!this.modeValue.get().equalsIgnoreCase("minesucht") || ((double) f362mc.field_71439_g.func_180425_c().func_177956_o()) == y + 1.0d) ? !f362mc.field_71441_e.func_72945_a(f362mc.field_71439_g, f362mc.field_71439_g.func_174813_aQ().func_72317_d((((double) x) + 0.5d) - f362mc.field_71439_g.field_70165_t, (y + 1.0d) - f362mc.field_71439_g.field_70163_u, (((double) z) + 0.5d) - f362mc.field_71439_g.field_70161_v)).isEmpty() ? new Color(255, 0, 0, 90) : new Color(0, 255, 0, 90) : new Color(255, 0, 0, 90));
            RenderUtils.drawFilledBox(new AxisAlignedBB(x - renderManager.field_78725_b, (y + 1.0d) - renderManager.field_78726_c, z - renderManager.field_78723_d, (x - renderManager.field_78725_b) + 1.0d, (y + 1.2d) - renderManager.field_78726_c, (z - renderManager.field_78723_d) + 1.0d));
            GL11.glEnable(3553);
            GL11.glEnable(2929);
            GL11.glDepthMask(true);
            GL11.glDisable(3042);
            RenderUtils.renderNameTag(Math.round(f362mc.field_71439_g.func_70011_f(x + 0.5d, y + 1.0d, z + 0.5d)) + "m", x + 0.5d, y + 1.7d, z + 0.5d);
            GlStateManager.func_179117_G();
        }
    }

    @EventTarget
    public void onMove(MoveEvent event) {
        if (this.modeValue.get().equalsIgnoreCase("aac3.5.0") && this.freeze) {
            event.zeroXZ();
        }
    }

    @EventTarget
    public void onPacket(PacketEvent event) {
        Packet<?> packet = event.getPacket();
        if (!this.disableLogger && (packet instanceof C03PacketPlayer)) {
            C03PacketPlayer packetPlayer = (C03PacketPlayer) packet;
            String lowerCase = this.modeValue.get().toLowerCase();
            boolean z = true;
            switch (lowerCase.hashCode()) {
                case 109651721:
                    if (lowerCase.equals("spoof")) {
                        z = false;
                        break;
                    }
                    break;
                case 325230105:
                    if (lowerCase.equals("aac3.5.0")) {
                        z = true;
                        break;
                    }
                    break;
            }
            switch (z) {
                case false:
                    if (this.endPos != null) {
                        packetPlayer.field_149479_a = this.endPos.func_177958_n() + 0.5d;
                        packetPlayer.field_149477_b = this.endPos.func_177956_o() + 1;
                        packetPlayer.field_149478_c = this.endPos.func_177952_p() + 0.5d;
                        f362mc.field_71439_g.func_70107_b(this.endPos.func_177958_n() + 0.5d, this.endPos.func_177956_o() + 1, this.endPos.func_177952_p() + 0.5d);
                        return;
                    }
                    return;
                case true:
                    if (!this.flyTimer.hasTimePassed(60)) {
                        return;
                    }
                    event.cancelEvent();
                    if (!(packet instanceof C03PacketPlayer.C04PacketPlayerPosition) && !(packet instanceof C03PacketPlayer.C06PacketPlayerPosLook)) {
                        return;
                    }
                    this.packets.add(packet);
                    return;
                default:
                    return;
            }
        }
    }

    @Override // net.ccbluex.liquidbounce.features.module.Module
    public String getTag() {
        return this.modeValue.get();
    }
}
