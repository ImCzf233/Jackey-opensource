package net.ccbluex.liquidbounce.features.module.modules.exploit;

import net.ccbluex.liquidbounce.event.BlockBBEvent;
import net.ccbluex.liquidbounce.event.EventTarget;
import net.ccbluex.liquidbounce.event.JumpEvent;
import net.ccbluex.liquidbounce.event.MoveEvent;
import net.ccbluex.liquidbounce.event.PacketEvent;
import net.ccbluex.liquidbounce.event.PushOutEvent;
import net.ccbluex.liquidbounce.event.UpdateEvent;
import net.ccbluex.liquidbounce.features.module.Module;
import net.ccbluex.liquidbounce.features.module.ModuleCategory;
import net.ccbluex.liquidbounce.features.module.ModuleInfo;
import net.ccbluex.liquidbounce.utils.MovementUtils;
import net.ccbluex.liquidbounce.utils.block.BlockUtils;
import net.ccbluex.liquidbounce.utils.timer.TickTimer;
import net.ccbluex.liquidbounce.value.ListValue;
import net.minecraft.block.BlockAir;
import net.minecraft.client.network.NetHandlerPlayClient;
import net.minecraft.init.Blocks;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C0BPacketEntityAction;
import net.minecraft.util.AxisAlignedBB;
import net.minecraft.util.BlockPos;
import net.minecraft.util.MathHelper;

@ModuleInfo(name = "Phase", description = "Allows you to walk through blocks.", category = ModuleCategory.EXPLOIT)
/* loaded from: Jackey Client b2.jar:net/ccbluex/liquidbounce/features/module/modules/exploit/Phase.class */
public class Phase extends Module {
    private boolean mineplexClip;
    private boolean noRot;
    private int stage;
    public final ListValue modeValue = new ListValue("Mode", new String[]{"Vanilla", "Skip", "Spartan", "Clip", "AAC3.5.0", "AACv4", "Mineplex", "Redesky", "SmartVClip"}, "Vanilla");
    private final TickTimer tickTimer = new TickTimer();
    private TickTimer mineplexTickTimer = new TickTimer();

    @Override // net.ccbluex.liquidbounce.features.module.Module
    public void onEnable() {
        this.stage = 0;
        if (this.modeValue.get().equalsIgnoreCase("aacv4")) {
            f362mc.field_71428_T.field_74278_d = 0.1f;
        }
    }

    @Override // net.ccbluex.liquidbounce.features.module.Module
    public void onDisable() {
        if (this.modeValue.get().equalsIgnoreCase("aacv4")) {
            f362mc.field_71428_T.field_74278_d = 1.0f;
        }
    }

    @EventTarget
    public void onUpdate(UpdateEvent event) {
        if (this.modeValue.get().equalsIgnoreCase("aacv4")) {
            switch (this.stage) {
                case 1:
                    f362mc.field_71439_g.field_71174_a.func_147297_a(new C03PacketPlayer.C06PacketPlayerPosLook(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 1.0E-8d, f362mc.field_71439_g.field_70161_v, f362mc.field_71439_g.field_70177_z, f362mc.field_71439_g.field_70125_A, false));
                    f362mc.field_71439_g.field_71174_a.func_147297_a(new C03PacketPlayer.C06PacketPlayerPosLook(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 1.0d, f362mc.field_71439_g.field_70161_v, f362mc.field_71439_g.field_70177_z, f362mc.field_71439_g.field_70125_A, false));
                    break;
                case 3:
                    setState(false);
                    break;
            }
            this.stage++;
        } else if (this.modeValue.get().equalsIgnoreCase("redesky")) {
            switch (this.stage) {
                case 0:
                    f362mc.field_71439_g.func_70107_b(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 1.0E-8d, f362mc.field_71439_g.field_70161_v);
                    f362mc.field_71439_g.field_71174_a.func_147297_a(new C03PacketPlayer.C06PacketPlayerPosLook(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 1.0E-8d, f362mc.field_71439_g.field_70161_v, f362mc.field_71439_g.field_70177_z, f362mc.field_71439_g.field_70125_A, false));
                    break;
                case 1:
                    f362mc.field_71439_g.func_70107_b(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 1.0d, f362mc.field_71439_g.field_70161_v);
                    f362mc.field_71439_g.field_71174_a.func_147297_a(new C03PacketPlayer.C06PacketPlayerPosLook(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 1.0d, f362mc.field_71439_g.field_70161_v, f362mc.field_71439_g.field_70177_z, f362mc.field_71439_g.field_70125_A, false));
                    break;
                case 3:
                    setState(false);
                    break;
            }
            this.stage++;
        } else {
            boolean isInsideBlock = BlockUtils.collideBlockIntersects(f362mc.field_71439_g.func_174813_aQ(), block -> {
                return Boolean.valueOf(!(block instanceof BlockAir));
            });
            if (isInsideBlock && !this.modeValue.get().equalsIgnoreCase("Mineplex") && !this.modeValue.get().equalsIgnoreCase("SmartVClip")) {
                f362mc.field_71439_g.field_70145_X = true;
                f362mc.field_71439_g.field_70181_x = 0.0d;
                f362mc.field_71439_g.field_70122_E = true;
            }
            NetHandlerPlayClient netHandlerPlayClient = f362mc.func_147114_u();
            String lowerCase = this.modeValue.get().toLowerCase();
            boolean z = true;
            switch (lowerCase.hashCode()) {
                case -2011701869:
                    if (lowerCase.equals("spartan")) {
                        z = true;
                        break;
                    }
                    break;
                case -1785128803:
                    if (lowerCase.equals("smartvclip")) {
                        z = true;
                        break;
                    }
                    break;
                case -779802843:
                    if (lowerCase.equals("redesky2")) {
                        z = true;
                        break;
                    }
                    break;
                case 3056464:
                    if (lowerCase.equals("clip")) {
                        z = true;
                        break;
                    }
                    break;
                case 3532159:
                    if (lowerCase.equals("skip")) {
                        z = true;
                        break;
                    }
                    break;
                case 233102203:
                    if (lowerCase.equals("vanilla")) {
                        z = false;
                        break;
                    }
                    break;
                case 325230105:
                    if (lowerCase.equals("aac3.5.0")) {
                        z = true;
                        break;
                    }
                    break;
                case 1083223725:
                    if (lowerCase.equals("redesky")) {
                        z = true;
                        break;
                    }
                    break;
            }
            switch (z) {
                case false:
                    if (f362mc.field_71439_g.field_70122_E && this.tickTimer.hasTimePassed(2) && f362mc.field_71439_g.field_70123_F && (!isInsideBlock || f362mc.field_71439_g.func_70093_af())) {
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(0.5d, 0.0d, 0.5d, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u + 0.2d, f362mc.field_71439_g.field_70161_v, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(0.5d, 0.0d, 0.5d, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t + 0.5d, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v + 0.5d, true));
                        double yaw = Math.toRadians(f362mc.field_71439_g.field_70177_z);
                        f362mc.field_71439_g.func_70107_b(f362mc.field_71439_g.field_70165_t + ((-Math.sin(yaw)) * 0.04d), f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v + (Math.cos(yaw) * 0.04d));
                        this.tickTimer.reset();
                        break;
                    }
                    break;
                case true:
                    if (f362mc.field_71439_g.field_70122_E && this.tickTimer.hasTimePassed(2) && f362mc.field_71439_g.field_70123_F && (!isInsideBlock || f362mc.field_71439_g.func_70093_af())) {
                        double direction = MovementUtils.getDirection();
                        double posX = (-Math.sin(direction)) * 0.3d;
                        double posZ = Math.cos(direction) * 0.3d;
                        for (int i = 0; i < 3; i++) {
                            f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u + 0.06d, f362mc.field_71439_g.field_70161_v, true));
                            f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t + (posX * i), f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v + (posZ * i), true));
                        }
                        f362mc.field_71439_g.func_174826_a(f362mc.field_71439_g.func_174813_aQ().func_72317_d(posX, 0.0d, posZ));
                        f362mc.field_71439_g.func_70634_a(f362mc.field_71439_g.field_70165_t + posX, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v + posZ);
                        this.tickTimer.reset();
                        break;
                    }
                    break;
                case true:
                    if (f362mc.field_71439_g.field_70122_E && this.tickTimer.hasTimePassed(2) && f362mc.field_71439_g.field_70123_F && (!isInsideBlock || f362mc.field_71439_g.func_70093_af())) {
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(0.5d, 0.0d, 0.5d, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 0.2d, f362mc.field_71439_g.field_70161_v, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(0.5d, 0.0d, 0.5d, true));
                        netHandlerPlayClient.func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t + 0.5d, f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v + 0.5d, true));
                        double yaw2 = Math.toRadians(f362mc.field_71439_g.field_70177_z);
                        f362mc.field_71439_g.func_70107_b(f362mc.field_71439_g.field_70165_t + ((-Math.sin(yaw2)) * 0.04d), f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v + (Math.cos(yaw2) * 0.04d));
                        this.tickTimer.reset();
                        break;
                    }
                    break;
                case true:
                    if (this.tickTimer.hasTimePassed(2) && f362mc.field_71439_g.field_70123_F && (!isInsideBlock || f362mc.field_71439_g.func_70093_af())) {
                        double yaw3 = Math.toRadians(f362mc.field_71439_g.field_70177_z);
                        double oldX = f362mc.field_71439_g.field_70165_t;
                        double oldZ = f362mc.field_71439_g.field_70161_v;
                        int i2 = 1;
                        while (true) {
                            if (i2 <= 10) {
                                double x = (-Math.sin(yaw3)) * i2;
                                double z2 = Math.cos(yaw3) * i2;
                                if (!(BlockUtils.getBlock(new BlockPos(oldX + x, f362mc.field_71439_g.field_70163_u, oldZ + z2)) instanceof BlockAir) || !(BlockUtils.getBlock(new BlockPos(oldX + x, f362mc.field_71439_g.field_70163_u + 1.0d, oldZ + z2)) instanceof BlockAir)) {
                                    i2++;
                                } else {
                                    f362mc.field_71439_g.func_70107_b(oldX + x, f362mc.field_71439_g.field_70163_u, oldZ + z2);
                                }
                            }
                        }
                        this.tickTimer.reset();
                        break;
                    }
                    break;
                case true:
                    if (this.tickTimer.hasTimePassed(2) && f362mc.field_71439_g.field_70123_F && (!isInsideBlock || f362mc.field_71439_g.func_70093_af())) {
                        double yaw4 = Math.toRadians(f362mc.field_71439_g.field_70177_z);
                        f362mc.field_71439_g.func_70107_b(f362mc.field_71439_g.field_70165_t + (-Math.sin(yaw4)), f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v + Math.cos(yaw4));
                        this.tickTimer.reset();
                        break;
                    }
                    break;
                case true:
                    boolean cageCollision = (f362mc.field_71441_e.func_180495_p(new BlockPos(f362mc.field_71439_g).func_177981_b(3)).func_177230_c() == Blocks.field_150350_a || f362mc.field_71441_e.func_180495_p(new BlockPos(f362mc.field_71439_g).func_177977_b()).func_177230_c() == Blocks.field_150350_a) ? false : true;
                    this.noRot = f362mc.field_71439_g.field_70173_aa >= 0 && f362mc.field_71439_g.field_70173_aa <= 40 && cageCollision;
                    if (f362mc.field_71439_g.field_70173_aa >= 20 && f362mc.field_71439_g.field_70173_aa < 40 && cageCollision) {
                        f362mc.func_147114_u().func_147297_a(new C03PacketPlayer.C04PacketPlayerPosition(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 4.0d, f362mc.field_71439_g.field_70161_v, false));
                        f362mc.field_71439_g.func_70107_b(f362mc.field_71439_g.field_70165_t, f362mc.field_71439_g.field_70163_u - 4.0d, f362mc.field_71439_g.field_70161_v);
                        break;
                    }
                    break;
                case true:
                    setState(false);
                    break;
                case true:
                    setState(false);
                    break;
            }
            this.tickTimer.update();
        }
    }

    @EventTarget
    public void onBlockBB(BlockBBEvent event) {
        if (f362mc.field_71439_g != null && BlockUtils.collideBlockIntersects(f362mc.field_71439_g.func_174813_aQ(), block -> {
            return Boolean.valueOf(!(block instanceof BlockAir));
        }) && event.getBoundingBox() != null && event.getBoundingBox().field_72337_e > f362mc.field_71439_g.func_174813_aQ().field_72338_b && !this.modeValue.get().equalsIgnoreCase("Mineplex") && !this.modeValue.get().equalsIgnoreCase("SmartVClip")) {
            AxisAlignedBB axisAlignedBB = event.getBoundingBox();
            event.setBoundingBox(new AxisAlignedBB(axisAlignedBB.field_72336_d, f362mc.field_71439_g.func_174813_aQ().field_72338_b, axisAlignedBB.field_72334_f, axisAlignedBB.field_72340_a, axisAlignedBB.field_72338_b, axisAlignedBB.field_72339_c));
        }
    }

    @EventTarget
    public void onPacket(PacketEvent event) {
        C03PacketPlayer packet = event.getPacket();
        if (packet instanceof C03PacketPlayer) {
            C03PacketPlayer packetPlayer = packet;
            if (this.modeValue.get().equalsIgnoreCase("AAC3.5.0")) {
                float yaw = (float) MovementUtils.getDirection();
                packetPlayer.field_149479_a -= MathHelper.func_76126_a(yaw) * 1.0E-8d;
                packetPlayer.field_149478_c += MathHelper.func_76134_b(yaw) * 1.0E-8d;
            }
            if (this.modeValue.get().equalsIgnoreCase("SmartVClip") && this.noRot && packetPlayer.field_149481_i) {
                event.cancelEvent();
            }
        }
        if ((packet instanceof C0BPacketEntityAction) && this.modeValue.get().equalsIgnoreCase("SmartVClip") && this.noRot) {
            event.cancelEvent();
        }
    }

    @EventTarget
    private void onMove(MoveEvent event) {
        if (this.modeValue.get().equalsIgnoreCase("mineplex")) {
            if (f362mc.field_71439_g.field_70123_F) {
                this.mineplexClip = true;
            }
            if (!this.mineplexClip) {
                return;
            }
            this.mineplexTickTimer.update();
            event.setX(0.0d);
            event.setZ(0.0d);
            if (this.mineplexTickTimer.hasTimePassed(3)) {
                this.mineplexTickTimer.reset();
                this.mineplexClip = false;
            } else if (this.mineplexTickTimer.hasTimePassed(1)) {
                double offset = this.mineplexTickTimer.hasTimePassed(2) ? 1.6d : 0.06d;
                double direction = MovementUtils.getDirection();
                f362mc.field_71439_g.func_70107_b(f362mc.field_71439_g.field_70165_t + ((-Math.sin(direction)) * offset), f362mc.field_71439_g.field_70163_u, f362mc.field_71439_g.field_70161_v + (Math.cos(direction) * offset));
            }
        }
        if (this.modeValue.get().equalsIgnoreCase("SmartVClip") && this.noRot) {
            event.zeroXZ();
        }
    }

    @EventTarget
    public void onPushOut(PushOutEvent event) {
        event.cancelEvent();
    }

    @EventTarget
    public void onJump(JumpEvent event) {
        if (!this.modeValue.get().equalsIgnoreCase("SmartVClip") || !this.noRot) {
            return;
        }
        event.cancelEvent();
    }

    @Override // net.ccbluex.liquidbounce.features.module.Module
    public String getTag() {
        return this.modeValue.get();
    }
}
